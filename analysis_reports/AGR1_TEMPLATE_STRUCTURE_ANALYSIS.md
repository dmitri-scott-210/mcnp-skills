# AGR-1 TEMPLATE STRUCTURE ANALYSIS

## Executive Summary

The AGR-1 bench.template is a sophisticated example of automated MCNP input generation for multi-cycle reactor burnup analysis. This 13,727-line template uses **Jinja2 templating** to generate 13 cycle-specific MCNP input files representing the irradiation history of the AGR-1 TRISO fuel test in the Advanced Test Reactor (ATR).

**Key Achievement**: A single master template + operational data = 13 complete MCNP inputs (860 KB each) representing different reactor operating conditions.

---

## 1. TEMPLATE STRUCTURE

### 1.1 Overall Organization

The template follows the standard MCNP three-block structure but with **template placeholders** that enable parameterization:

```
bench.template (646 KB, 13,727 lines)
├── HEADER BLOCK
│   └── Title card and documentation comments
│
├── CELL BLOCK
│   ├── Fixed ATR quarter-core geometry
│   │   ├── ATR fuel elements (60106-60315: 210 cells for 10 elements × 3 radial × 7 axial zones)
│   │   ├── ATR lobes (NE, SE, E)
│   │   ├── Beryllium reflector
│   │   ├── Control drums (4 drums: E1, E2, E3, E4)
│   │   ├── Water regions
│   │   └── Structural components
│   │
│   ├── {{ne_cells}} — Parameterized NE neck shim cells (line 621)
│   ├── {{se_cells}} — Parameterized SE neck shim cells (line 674)
│   └── {{cells}} — AGR-1 test assembly cells (line 1430)
│       └── TRISO compact geometry with lattices
│
├── SURFACE BLOCK
│   ├── Fixed ATR geometry surfaces
│   │   ├── Cylindrical surfaces for fuel elements
│   │   ├── Planes for axial zones
│   │   └── Control drum cylinders
│   │
│   ├── {{oscc_surfaces}} — Control drum position surfaces (line 1782)
│   └── {{surfaces}} — AGR-1 test assembly surfaces (line 2214)
│       └── TRISO particle and compact surfaces
│
└── DATA BLOCK
    ├── Fixed ATR materials (water, aluminum, beryllium, hafnium)
    ├── ATR fuel materials with fission products (m2106-m2315)
    ├── {{materials}} — AGR-1 TRISO materials (line 13603)
    ├── Physics cards (MODE, KCODE, PHYS)
    └── Source definition (KSRC)
```

### 1.2 Template Placeholder Summary

| Placeholder | Location | Purpose | Generated By |
|------------|----------|---------|--------------|
| `{{ne_cells}}` | Line 621 | NE neck shim rod cells (inserted/withdrawn) | `ne_cells` dict from neck shim CSV |
| `{{se_cells}}` | Line 674 | SE neck shim rod cells (inserted/withdrawn) | `se_cells` dict from neck shim CSV |
| `{{cells}}` | Line 1430 | AGR-1 TRISO compact cells and lattices | Hardcoded in `create_inputs.py` |
| `{{oscc_surfaces}}` | Line 1782 | Control drum position surfaces (E1-E4) | `oscc_surfaces` dict from OSCC CSV |
| `{{surfaces}}` | Line 2214 | AGR-1 compact and TRISO surfaces | Generated by `compact_surfaces()` |
| `{{materials}}` | Line 13603 | AGR-1 kernel materials (UCO fuel) | Generated material definitions |

---

## 2. GEOMETRY ORGANIZATION

### 2.1 ATR Quarter-Core Structure

The template models a **quarter-core symmetric section** of the ATR with mirror boundaries at x=0 and y=0 planes.

**Coordinate System:**
- Origin at ATR core center
- East quadrant modeled (positive x, negative y)
- Planes 10 and -30 define quadrant boundaries

**Hierarchical Organization:**

```
ATR Quarter Core
│
├── NE LOBE (cells 60106-60147, 60901-60910)
│   ├── Fuel Elements: 6, 7, 8 (3 elements)
│   ├── 3 Radial Zones per element (inner/middle/outer)
│   ├── 7 Axial Zones per element
│   ├── Side plates (Al-6061)
│   ├── Water gaps between plates
│   └── Flux trap with experiment positions
│
├── E LOBE (cells 60169-60210)
│   ├── Fuel Elements: 9, 10, 11
│   ├── SE flux trap with AGR-1 test assembly
│   └── Safety rod guide tubes
│
├── SE LOBE (cells 60211-60315, 60920-60951)
│   ├── Fuel Elements: 12, 13, 14, 15 (4 elements)
│   └── Control systems
│
├── NECK SHIM RODS (cells 701-730, 791-817)
│   ├── NE: 6 rods (cells 701-730)
│   ├── SE: 6 rods (cells 791-817)
│   └── Material: Water (withdrawn) or Hf (inserted)
│
├── CONTROL DRUMS (cells 173-176, 193-196, 273-296, 313-316)
│   ├── E1, E2, E3, E4 (4 drums)
│   ├── Hafnium poison section
│   ├── Beryllium reflector section
│   └── Stainless steel structure
│
├── BERYLLIUM REFLECTOR (cells 71-74)
│   ├── Inner region with socket voids (98.84% density)
│   └── Outer region full density (100%)
│
└── WATER AND STRUCTURAL REGIONS
    ├── Below/above fuel regions
    └── Reflector tank
```

### 2.2 Cell Numbering Convention

**ATR Fuel Elements:**
```
Cell Number: 60XYZ
  X = Element number (1-3 digit: 106-315)
  Pattern: Element # (1-10) → Radial Zone (1-3) → Axial Zone (1-7)

Example:
  60106 = Element 6, Radial Zone 1, Axial Zone 1
  60112 = Element 6, Radial Zone 1, Axial Zone 7
  60113 = Element 6, Radial Zone 2, Axial Zone 1
```

**ATR Support Cells:**
```
609XX = NE lobe structural cells
609XX = SE lobe structural cells
```

**AGR-1 Test Assembly:**
```
9XYZZ format:
  X = Capsule number (1-6)
  Y = Stack number (1-3)
  ZZ = Component within stack

Example:
  91011 = Capsule 1, Stack 1, Compact 1, TRISO particle cell
  96033 = Capsule 6, Stack 3, upper graphite spacer
```

### 2.3 Surface Numbering Convention

**ATR Fuel Cylinders:**
```
1XXX series: NE lobe fuel element surfaces
  1111-1128: Element radial boundaries
  1200: NE lobe outer radius

1XXX series: SE lobe surfaces
  1721-1738: Element radial boundaries
  1800: SE lobe outer radius

1XXX series: E lobe surfaces
  1821-1838: Element radial boundaries
```

**Axial Planes:**
```
100-200 range: Core height planes
  95  = Bottom of core
  100 = Bottom of active fuel
  200 = Top of active fuel
  205 = Top of core

Intermediate planes:
  110, 120, 130, 160, 170, 180 = Axial zone boundaries
```

**Control Drums:**
```
905, 910, 915, 920 = Drum cylinders (E1-E4)
981-984 = Drum poison section surfaces (position-dependent, in {{oscc_surfaces}})
```

**AGR-1 Surfaces:**
```
97XXX series: AGR-1 test assembly
  97011-97032: Compact stack cylinders
  97060-97066: Capsule holder and walls

98XXX series: Axial planes for AGR-1
  98000-98045: Capsule boundaries
```

---

## 3. PARAMETERIZATION STRATEGY

### 3.1 Control Drum Angles (OSCC)

**Operational Context:**
- ATR has 4 control drums in the East quadrant (E1, E2, E3, E4)
- Drums rotate to adjust reactivity (0° = poison in, 180° = poison out)
- Position varies throughout each operating cycle

**Template Implementation:**

1. **Predefined angle library** (13 discrete angles):
   ```python
   angles = [0, 25, 40, 50, 60, 65, 75, 80, 85, 100, 120, 125, 150]
   ```

2. **Surface definitions for each angle** stored in `drum_surfaces` dict:
   ```
   For NE drums (E1, E2):
     Surface 981 = E1 drum center (position varies with angle)
     Surface 982 = E2 drum center (position varies with angle)

   For SE drums (E3, E4):
     Surface 983 = E3 drum center
     Surface 984 = E4 drum center
   ```

3. **Time-weighted averaging**:
   ```python
   ave_angle = (angle * time_interval).sum() / total_time
   closest_angle = find_closest_value(angles, ave_angle)
   ```

4. **Result**: Each cycle gets drum surfaces corresponding to the time-averaged position

**Example Output** (inserted at line 1782):
```
c
  981   c/z   44.2816  -14.0837  9.195       $ DRUM E1 AT 50 DEGREES
  982   c/z   28.6141  -25.1311  9.195       $ DRUM E2 AT 50 DEGREES
c
  983   c/z   25.1311  -28.6141  9.195       $ DRUM E3 AT 50 DEGREES
  984   c/z   14.0837  -44.2816  9.195       $ DRUM E4 AT 50 DEGREES
c
```

**Why Surface Centers Change:**
- Drums rotate around their own axes
- Poison (hafnium) section is eccentric within drum
- As drum rotates, poison section center moves in x-y plane

### 3.2 Neck Shim Rod Positions

**Operational Context:**
- 12 neck shim rods total (6 in NE, 6 in SE)
- Binary state: Inserted (hafnium absorber) or Withdrawn (water)
- Used for fine reactivity control

**Template Implementation:**

1. **Material selection** based on insertion state:
   ```python
   neck_materials = {
       0: (10, 1.00276E-1),   # Withdrawn: water
       1: (71, 4.55926E-2),   # Inserted: hafnium
   }
   ```

2. **Cell generation** for each rod:
   ```python
   neck_shim = {
       'NE 1': (702, 701, 702),  # (cell_num, inner_surf, outer_surf)
       'NE 2': (707, 706, 707),
       ...
       'SE 6': (817, 816, 817),
   }
   ```

3. **Time-weighted averaging and rounding**:
   ```python
   ave_insertion = (insertion * time_interval).sum() / total_time
   condition = int(np.rint(ave_insertion))  # Round to 0 or 1
   ```

**Example Output** (inserted at line 621 for NE, 674 for SE):
```
c
  702   10 1.00276e-01    701   -702  100  -200        $ NE 1 Hf neck shim - withdrawn
                                    -30    10        $ East Quadrant
c
  707   71 4.55926e-02    706   -707  100  -200        $ NE 2 Hf neck shim - inserted
                                    -30    10        $ East Quadrant
c
```

### 3.3 AGR-1 Test Assembly Cells

**Design:**
- 6 capsules stacked vertically in B10 hole
- Each capsule contains 3 stacks
- Each stack contains 4 compacts
- Each compact contains ~4,000-4,100 TRISO particles
- 4 particle variants (baseline, variant1, variant2, variant3)

**Universe Hierarchy:**
```
Universe 0 (main geometry)
│
└── Capsule cell → filled with universe XYZ0
    │
    └── Universe XYZ0: Lattice of compact positions
        │
        └── Filled with universe XYZ6 (compact lattice)
            │
            └── Universe XYZ6: 3D lattice of TRISO particles
                ├── Filled with universe XYZ4 (particle)
                └── Filled with universe XYZ5 (matrix)
                    │
                    └── Universe XYZ4: TRISO layers
                        ├── Kernel (fuel)
                        ├── Buffer (porous carbon)
                        ├── IPyC (inner pyrocarbon)
                        ├── SiC (silicon carbide)
                        └── OPyC (outer pyrocarbon)
```

**Cell Numbering for AGR-1:**
```
Base: 90000 + cap*1000 + stack*100 + 2*(comp-1)*10

Capsule 1, Stack 1, Compact 1:
  90001 = Kernel
  90002 = Buffer
  90003 = IPyC
  90004 = SiC
  90005 = OPyC
  90006 = Matrix
  90007 = Matrix fill
  90008 = Particle lattice
  90009 = Matrix between particles
  90010 = Compact outer cylinder
  90011 = Compact fill cell with transformation
```

**Lattice Structure Example:**
```
c
90008 0   -90111  u=1114 lat=1  fill=-7:7 -7:7 0:0  $ Lattice of Particles
     115 115 115 115 115 115 114 114 114 115 115 115 115 115 115 $ Layer
     115 115 115 114 114 114 114 114 114 114 114 114 115 115 115
     115 115 114 114 114 114 114 114 114 114 114 114 114 115 115
     ...
     115 115 115 115 115 115 114 114 114 115 115 115 115 115 115
c
```
- Universe 114 = TRISO particle
- Universe 115 = Matrix only (no particle)
- Creates circular pattern of particles in compact

### 3.4 Power Distribution

**Not directly in template, but used for depletion:**

The `create_inputs.py` script calculates time-averaged power for each cycle:

```python
# Power by lobe extracted from power.csv
e_power_by_cycle[cycle] = (ne + c + se) / 3  # Average of 3 lobes

# Time-weighted averaging
ave_power = (power * time_interval).sum() / total_time
```

**Output**: MOAA depletion input specification
```
mcnp_input_file: bench_138B.i
time: 41.38 days
power: 5.23 MW
```

---

## 4. BEST PRACTICES DEMONSTRATED

### 4.1 Modular Organization with Comment Delimiters

**Pattern Used Throughout:**
```
c   ---------------------------------------------------------------------------
c      SECTION DESCRIPTION
c   ---------------------------------------------------------------------------
[cells/surfaces/materials]
c
c   ---------------------------------------------------------------------------
c      NEXT SECTION
c   ---------------------------------------------------------------------------
```

**Benefits:**
- Easy visual parsing of 13,000+ line file
- Quick navigation to relevant sections
- Clear separation between template regions and parameterized regions

**Major Sections Identified:**
```
Line 2:      Header documentation
Line 51:     *** CELLS ***
Line 313:    ATR Fuel Elements
Line 618:    NE Neck Shims (PARAMETERIZED)
Line 671:    SE Neck Shims (PARAMETERIZED)
Line 1427:   Large B10 Hole - AGR Cells (PARAMETERIZED)
Line 1778:   Control Drum Position Surfaces (PARAMETERIZED)
Line 2218:   Materials
Line 2470:   ATR Fuel Element Materials
Line 13601:  AGR Materials (PARAMETERIZED)
Line 13610:  Physics Cards
```

### 4.2 Inline Documentation

**Cell Comments:**
```
60106 2106 7.969921E-02  1111  -1118   74  -29   53  100 -110 $Elem  6 RZ 1 AZ 1
60107 2107 7.967400E-02  1111  -1118   74  -29   53  110 -120 $Elem  6 RZ 1 AZ 2
```
- Element number, radial zone, axial zone clearly labeled
- Density value visible
- Easy to verify fuel loading pattern

**Surface Comments:**
```
 1111   c/z    30.533    0.0     7.658       $ 1st fuel plate-inner
 1118   c/z    30.533    0.0     8.837       $ 4th fuel plate-outer
 1119   c/z    30.533    0.0     9.0348      $ 5th fuel plate-inner
 1120   c/z    30.533    0.0    12.413       $ 15th fuel plate-outer
```
- Physical meaning clear from comment
- Center coordinates and radii documented

### 4.3 Consistent Naming and Numbering

**Systematic Numbering:**
- ATR fuel cells: 60000-60999
- ATR structural: 1-999
- AGR-1 cells: 90000-99999
- ATR surfaces: 1-999, 1000-2000
- AGR-1 surfaces: 97000-98999

**Result**: No number conflicts, easy to identify component from cell/surface number

### 4.4 Separation of Fixed vs. Parameterized Content

**Fixed Content (in template):**
- ATR quarter-core geometry (always the same)
- Structural materials
- Physics cards
- Source distribution

**Parameterized Content (generated):**
- Control drum positions → varies by cycle
- Neck shim states → varies by cycle
- AGR-1 test assembly → varies by design
- ATR fuel compositions → includes fission products

**Why This Matters:**
- Template remains stable and version-controlled
- Changes to operational data don't require template edits
- Easy to regenerate inputs if data is corrected
- Clear audit trail: template + data + script = inputs

### 4.5 Data-Driven Design

**Three CSV Files Drive Parameterization:**

1. **power.csv** (power history):
   - Columns: Cycle, Timestep, Time Interval, Lobe Powers
   - 13 cycles × multiple timesteps
   - Used for: MOAA burnup input, time-averaging

2. **oscc.csv** (control drum history):
   - Columns: Cycle, Timestep, NWOSCC, SWOSCC, NEOSCC, SEOSCC
   - Drum angles in degrees
   - Used for: Selecting drum position surfaces

3. **neck_shim.csv** (neck shim history):
   - Columns: Cycle, Timestep, NE 1-6, SE 1-6
   - Binary: 0 (withdrawn) or 1 (inserted)
   - Used for: Material selection in shim cells

**Advantages:**
- Non-programmers can update operational data
- Spreadsheet-friendly format
- Version control for data separate from code
- Easy validation of input data

### 4.6 Automated Quality Assurance

**Script Generates Validation Plots:**
```python
# OSCC angle vs time
plt.savefig(f'oscc_cycle_{cycle}')

# Power vs time
plt.savefig(f'power_cycle_{cycle}')

# Neck shim insertion vs time
plt.savefig(f'neck_cycle_{cycle}')
```

**Benefits:**
- Visual verification of data before running MCNP
- Detect anomalies in operational data
- Confirm time-averaging is reasonable

### 4.7 Template Flexibility

**Multiple Output Formats:**
1. **Criticality inputs** (bench_XXX.i): 13 files for burnup sequence
2. **Shielding input** (sdr-agr.i): Single model with room boundary

**Different physics modes from same template:**
```python
# Criticality version
mode    n
kcode   50000   1.01  10  200

# Shielding version (in sdr-agr.i)
mode    p
imp:p   1  880r  0
```

### 4.8 Scalability

**Demonstrated Scalability:**
- 6 capsules × 3 stacks × 4 compacts = 72 fuel compacts
- ~4,000 particles/compact × 72 compacts = ~288,000 TRISO particles
- Modeled with lattices (not 288,000 explicit cells!)
- Final input: 860 KB for complete model

**Keys to Scalability:**
1. **Lattice structures** for repetitive geometry
2. **Universe hierarchy** to manage complexity
3. **Function-based generation** for repeated patterns
4. **Symbolic constants** in Python (not hardcoded values)

---

## 5. TEMPLATE WORKFLOW

### 5.1 Input Generation Process

```
┌─────────────────────────────────────────────────────────────┐
│ OPERATIONAL DATA (CSV files)                                │
├─────────────────────────────────────────────────────────────┤
│ power.csv        → Reactor power by lobe vs time            │
│ oscc.csv         → Control drum angles vs time              │
│ neck_shim.csv    → Neck shim insertion state vs time        │
└─────────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────┐
│ create_inputs.py (Python + Jinja2)                          │
├─────────────────────────────────────────────────────────────┤
│ 1. Read CSV files                                           │
│ 2. For each cycle:                                          │
│    - Time-average power, OSCC angles, shim states           │
│    - Select discrete drum angles from library               │
│    - Generate control drum surfaces                         │
│    - Generate neck shim cells                               │
│    - Build AGR-1 geometry (compacts + TRISO)                │
│ 3. Render template with Jinja2                              │
│ 4. Write output file                                        │
│ 5. Generate QA plots                                        │
└─────────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────┐
│ MCNP INPUT FILES                                            │
├─────────────────────────────────────────────────────────────┤
│ bench_138B.i  ──┐                                           │
│ bench_139A.i    │                                           │
│ bench_139B.i    ├──→ 13 cycle-specific MCNP inputs          │
│     ...         │                                           │
│ bench_145A.i  ──┘                                           │
│                                                             │
│ sdr-agr.i     ────→ Shielding/dose rate model               │
└─────────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────┐
│ DEPLETION SEQUENCE (for MOAA/ORIGEN)                        │
├─────────────────────────────────────────────────────────────┤
│ mcnp_input_file: bench_138B.i                               │
│ time: 41.38 days                                            │
│ power: 5.23 MW                                              │
│                                                             │
│ mcnp_input_file: bench_138B.i  [shutdown]                   │
│ time: 15.00 days                                            │
│ power: 0.00 MW                                              │
│                                                             │
│ mcnp_input_file: bench_139A.i                               │
│ time: 56.25 days                                            │
│ power: 5.87 MW                                              │
│ ...                                                         │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 Jinja2 Template Rendering

**Template File** (bench.template):
```
c   ---------------------------------------------------------------------------
c      NE NECK SHIMS
c
{{ne_cells}}
  701  010 1.00276-1          -701  100  -200        $ NE 1 water inside shim
```

**Python Code** (create_inputs.py):
```python
from jinja2 import Environment, FileSystemLoader

env = Environment(loader=FileSystemLoader('./'))
template = env.get_template('bench.template')

for cycle in cycles:
    full_input = template.render(
        cells=cells,
        surfaces=surfaces,
        materials=materials,
        oscc_surfaces=oscc_surfaces[cycle],
        ne_cells=ne_cells[cycle],
        se_cells=se_cells[cycle],
    )

    with open(f'mcnp/{filename[cycle]}', 'w+') as f:
        f.write(full_input)
```

**Result** (bench_138B.i):
```
c   ---------------------------------------------------------------------------
c      NE NECK SHIMS
c
c
  702   71 4.55926e-02    701   -702  100  -200        $ NE 1 Hf neck shim - inserted
                                    -30    10        $ East Quadrant
c

  707   71 4.55926e-02    706   -707  100  -200        $ NE 2 Hf neck shim - inserted
                                    -30    10        $ East Quadrant
c
[...etc for all 6 NE shims...]

  701  010 1.00276-1          -701  100  -200        $ NE 1 water inside shim
```

---

## 6. GEOMETRY DETAILS

### 6.1 ATR Fuel Element Radial Zoning

**Three Radial Zones** model fuel plate-by-plate power distribution:

```
Zone 1: Plates 1-4 (innermost)
  Surfaces: 1111-1118 (NE), 1721-1728 (SE), 1821-1828 (E)

Zone 2: Plates 5-15 (middle)
  Surfaces: 1119-1120 (NE), 1729-1730 (SE), 1829-1830 (E)

Zone 3: Plates 16-19 (outermost)
  Surfaces: 1121-1128 (NE), 1731-1738 (SE), 1831-1838 (E)
```

**Homogenization:**
- Each zone = single homogenized material
- Fuel meat + cladding + water averaged
- Varying U-235 enrichment/burnup by zone

**Seven Axial Zones** (z-direction):
```
Z1:  100-110 cm  (bottom)
Z2:  110-120 cm
Z3:  120-130 cm
Z4:  130-160 cm  (largest, core midplane)
Z5:  160-170 cm
Z6:  170-180 cm
Z7:  180-200 cm  (top)
```

**Result**: 3 radial × 7 axial = 21 cells per fuel element

### 6.2 TRISO Particle Explicit Geometry

**Five Layers Explicitly Modeled:**

```
        Kernel       Buffer      IPyC        SiC         OPyC
       ┌─────┐
       │ UCO │     ┌───────┐
       │Fuel │     │Porous │   ┌─────────┐
       │ •   │────>│Carbon │──>│PyroC    │  ┌─────────┐  ┌─────────┐
       │10.9 │     │ Buffer│   │1.9 g/cm³│─>│SiC      │─>│PyroC    │
       │g/cm³│     │1.1    │   │ Inner   │  │3.2 g/cm³│  │1.9 g/cm³│
       └─────┘     │g/cm³  │   │         │  │         │  │ Outer   │
       349.7 μm    └───────┘   └─────────┘  └─────────┘  └─────────┘
       (radius)    103.5 μm     39.4 μm      35.3 μm      41.0 μm
                   (thickness)  (thickness)  (thickness)  (thickness)

       Total particle radius: 569.2 μm
```

**Material Definitions:**
```
m9XXX (kernel):  UCO (U, C, O mixture) at 10.924 g/cm³
m9090 (buffer):  Porous carbon at 1.10 g/cm³
m9091 (IPyC):    Pyrocarbon at 1.904 g/cm³ (variant-dependent)
m9092 (SiC):     Silicon carbide at 3.208 g/cm³
m9093 (OPyC):    Pyrocarbon at 1.907 g/cm³ (variant-dependent)
m9094 (matrix):  Graphite matrix at 1.297 g/cm³ (variant-dependent)
```

**Surface Definitions** (generated for each compact):
```python
def compact_surfaces(s, thick, n_particles):
    radii = calculate_radii(thick)

    surfaces = f"""
{s}1 so   {radii[0]:.6f}  $ Kernel
{s}2 so   {radii[1]:.6f}  $ Buffer
{s}3 so   {radii[2]:.6f}  $ InnerPyC
{s}4 so   {radii[3]:.6f}  $ SiC
{s}5 so   {radii[4]:.6f}  $ OuterPyC
{s}6 so   1.000000  $ Matrix
{s}7 rpp -{side} {side} -{side} {side} -0.050000 0.050000
{s}8 rpp -0.650000 0.650000 -0.650000 0.650000 -{side} {side}
{s}9 c/z  0.0 0.0   0.6500
"""
```

### 6.3 Compact Lattice Structure

**Lattice Hierarchy:**

```
Compact (cylinder: R=0.635 cm, H=2.54 cm)
│
└── Universe XYZ6: 15×15×1 lattice of "particle cubes"
    ├── Pitch determined by packing fraction
    ├── Each cube can contain:
    │   ├── Universe XYZ4: TRISO particle (5 layers)
    │   └── Universe XYZ5: Matrix only
    │
    └── Circular pattern encoded in FILL card:
        └── Matrix cubes at periphery, particle cubes in circle
```

**Packing Fraction Calculation:**
```python
vol_compact = π * 0.635² * (2.54 - 0.36)  # Compact volume
vol_triso = (4/3) * π * r_particle³        # Single particle volume
vol_triso_tot = vol_triso * n_particles    # All particles
pf = vol_triso_tot / vol_compact            # Packing fraction (~35%)
```

**Lattice Fill Pattern** (baseline variant, 4154 particles):
```
90008 0   -90117  u=1116 lat=1  fill=-7:7 -7:7 0:0  $ Lattice of Particles
     115 115 115 115 115 115 114 114 114 115 115 115 115 115 115 $ Layer 1
     115 115 115 114 114 114 114 114 114 114 114 114 115 115 115 $ Layer 2
     115 115 114 114 114 114 114 114 114 114 114 114 114 115 115 $ Layer 3
     ...
```
- 15×15 = 225 positions
- ~141 contain TRISO particles (u=114)
- ~84 are matrix only (u=115)
- Creates circular particle distribution

### 6.4 Capsule Stack Assembly

**Vertical Stack in B10 Hole:**

```
      ┌──────────────────────────────────────┐
      │  Top Air Filler          (99973)     │  z = 105.95 - 127.00 cm
      ├──────────────────────────────────────┤
      │  Capsule 6               (960XX)     │  z = 93.95 - 104.11 cm
      │  ├─ Stack 1, 2, 3                    │
      │  ├─ 4 compacts each                  │
      │  └─ Graphite holder, SS walls, Hf    │
      ├──────────────────────────────────────┤
      │  Gas Plenum                          │
      ├──────────────────────────────────────┤
      │  Capsule 5               (950XX)     │  z = 78.73 - 88.89 cm
      ├──────────────────────────────────────┤
      │  Gas Plenum                          │
      ├──────────────────────────────────────┤
      │  Capsule 4               (940XX)     │  z = 63.50 - 73.66 cm
      ├──────────────────────────────────────┤
      │  Gas Plenum                          │
      ├──────────────────────────────────────┤
      │  Capsule 3               (930XX)     │  z = 48.27 - 58.43 cm
      ├──────────────────────────────────────┤
      │  Gas Plenum                          │
      ├──────────────────────────────────────┤
      │  Capsule 2               (920XX)     │  z = 33.05 - 43.21 cm
      ├──────────────────────────────────────┤
      │  Gas Plenum                          │
      ├──────────────────────────────────────┤
      │  Capsule 1               (910XX)     │  z = 17.82 - 27.98 cm
      ├──────────────────────────────────────┤
      │  Bottom Support + Graphite Spacer    │  z = 14.66 - 17.82 cm
      ├──────────────────────────────────────┤
      │  Bottom Air Filler       (99970)     │  z = -2.54 - 14.66 cm
      └──────────────────────────────────────┘
```

**Each Capsule Contains:**
```
┌─────────────────────────────────────────┐
│ Top SS Support                          │
├─────────────────────────────────────────┤
│ Outer He Gap                            │
├─────────────────────────────────────────┤
│ Hafnium Middle Wall (thermal neutrons)  │
├─────────────────────────────────────────┤
│ SS Inner Wall                           │
├─────────────────────────────────────────┤
│ He Gap around holder                    │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │ Upper Graphite Spacer               │ │
│ ├─────────────────────────────────────┤ │
│ │ Stack 3: 4 compacts (3 cylinders)   │ │
│ │   Compact 3-4                       │ │
│ │   Compact 3-3                       │ │
│ │   Compact 3-2                       │ │
│ │   Compact 3-1                       │ │
│ ├─────────────────────────────────────┤ │
│ │ Stack 2: 4 compacts (2 cylinders)   │ │
│ │   Compact 2-4                       │ │
│ │   Compact 2-3                       │ │
│ │   Compact 2-2                       │ │
│ │   Compact 2-1                       │ │
│ ├─────────────────────────────────────┤ │
│ │ Stack 1: 4 compacts (1 cylinder)    │ │
│ │   Compact 1-4                       │ │
│ │   Compact 1-3                       │ │
│ │   Compact 1-2                       │ │
│ │   Compact 1-1                       │ │
│ ├─────────────────────────────────────┤ │
│ │ Lower Graphite Spacer               │ │
│ └─────────────────────────────────────┘ │
│   Borated Graphite Holder               │
├─────────────────────────────────────────┤
│ Bottom SS Support                       │
└─────────────────────────────────────────┘
```

**Three Stack Cylinders** in each capsule:
- Stack 1: (x, y) = (25.547, -24.553) cm
- Stack 2: (x, y) = (24.553, -25.547) cm
- Stack 3: (x, y) = (25.911, -25.911) cm
- All offset from capsule center at (25.337, -25.337) cm

**Design Purpose:**
- Hafnium wall: Reduce thermal flux, harden spectrum
- Borated graphite: Additional neutron absorption control
- Three stacks: Measure azimuthal flux variation
- Four compacts per stack: Measure axial flux/temperature profile

---

## 7. MATERIALS ORGANIZATION

### 7.1 Material Numbering Scheme

**ATR Materials (Fixed):**
```
m10     = Light water with thermal scattering
m14-18  = Beryllium with water mixtures
m21-24  = Stainless steel mixtures
m26     = Aluminum-water mixture
m29     = Aluminum alloy (6061)
m30     = Aluminum (pure)
m31-33  = Aluminum-water mixtures
m44     = Cobalt (for activation monitors)
m71     = Hafnium (neck shim rods)
```

**ATR Fuel Materials (Generated with fission products):**
```
m2106 - m2315  (210 materials total)
  Pattern: m2XYZ
    X = Element number (1-3 digits)
    Y = Radial zone (1-3)
    Z = Axial zone (1-7)

Example:
  m2106 = Element 6, Radial Zone 1, Axial Zone 1
  m2315 = Element 15, Radial Zone 3, Axial Zone 7
```

**ATR Fuel Composition:**
```
m2106
     1001.70c  3.393340E-02 $ H-1  (water)
     8016.70c  1.696670E-02 $ O-16 (water)
    12000.60c  2.176490E-04 $ Mg-nat (cladding)
    13027.70c  2.793720E-02 $ Al-27 (cladding, structure)
    14000.60c  1.130110E-04 $ Si-nat (impurity)
    24000.50c  2.304760E-05 $ Cr-nat (cladding)
    29000.50c  2.081160E-05 $ Cu-nat (impurity)
     5010.70c  4.522560E-06 $ B-10 (burnable poison)
    92234.70c  5.873407E-06 $ U-234 (fuel)
    92235.70c  4.198373E-04 $ U-235 (fuel) ← Primary fissile
    92236.70c  1.517056E-05 $ U-236 (fuel)
    92237.70c  1.326253E-07 $ U-237 (fuel)
    92238.70c  3.057844E-05 $ U-238 (fuel)
    93237.70c  1.886031E-07 $ Np-237 (fission product/actinide)
    94239.70c  3.962382E-07 $ Pu-239 (bred from U-238)
    94240.70c  3.184477E-08 $ Pu-240 (bred)
    94241.70c  1.038741E-08 $ Pu-241 (bred)
    36083.70c  2.749474E-07 $ Kr-83 (fission product gas)
    42095.70c  9.415301E-08 $ Mo-95 (fission product)
    44101.70c  2.720314E-06 $ Ru-101 (fission product)
    45103.70c  3.635464E-07 $ Rh-103 (fission product)
    ... [30+ fission products tracked]
    62149.70c  2.657344E-08 $ Sm-149 (strong absorber!)
    62151.70c  7.853828E-08 $ Sm-151 (absorber)
    63153.70c  1.027083E-07 $ Eu-153 (fission product)
    63155.70c  1.247127E-08 $ Eu-155 (fission product)
    64157.70c  1.440627E-10 $ Gd-157 (strong absorber)
mt2106      lwtr.10t         $ Thermal scattering for H in H2O
```

**Key Features:**
- Homogenized fuel + cladding + water
- Major fission products included (Xe, Sm, Gd = strong absorbers)
- Actinides tracked (Pu breeding)
- Density varies by zone (burnup-dependent)

**AGR-1 Materials (Generated):**
```
m8900 = Air
m8901 = Light water at 62°C
m8902 = Helium gas (gap fills)
m9000 - m9036 = Stainless steel 316L (multiple copies for different zones)
m9040 - m9056 = Graphite (various densities)
m9070 - m9075 = Borated graphite holders
m9080 - m9086 = Hafnium shrouds

m9090 = Buffer (porous carbon)
m9091 = IPyC (pyrocarbon)
m9092 = SiC (silicon carbide)
m9093 = OPyC (pyrocarbon)
m9094 = Matrix (graphite)

m9111 - m9643 = UCO Kernels (72 materials)
  Pattern: m9ABC
    A = Capsule (1-6)
    B = Stack (1-3)
    C = Compact (1-4)
```

**UCO Kernel Composition:**
```
m9111  (Capsule 1, Stack 1, Compact 1)
    92234.00c  3.34179E-03  $ U-234
    92235.00c  1.99636E-01  $ U-235 (19.7% enriched)
    92236.00c  1.93132E-04  $ U-236
    92238.00c  7.96829E-01  $ U-238
     6012.00c  0.3217217    $ C-12 (carbon buffer phase)
     6013.00c  0.0035783    $ C-13
     8016.00c  1.3613       $ O-16 (oxide phase)
```

**UCO = Uranium Carbide-Oxide**:
- Two-phase fuel: UC₂ + UO₂
- Better fission product retention than UO₂
- Higher thermal conductivity than oxide
- All 72 kernel materials identical (begin-of-life)

### 7.2 Thermal Scattering Treatment

**S(α,β) Tables Applied:**
```
mt10    lwtr.10t       $ H in light water at 300K
mt14    lwtr.10t       $ H in Be-H2O mixture
        be.01t         $ Be metal
mt2106  lwtr.10t       $ H in ATR fuel (water bound)
... [all ATR fuel materials] ...
```

**Why This Matters:**
- Correct thermalization in water moderator
- Important for criticality calculations
- Affects reactivity worth of control systems

### 7.3 Special Nuclear Data

**Custom AWTAB (atomic weight table):**
```
awtab   27458  57.4380612   $ Custom isotope weights
        36085  84.183600
        38089  88.144000
        ... [40+ custom entries]
```

**Purpose:**
- Override default MCNP atomic weights for specific isotopes
- Important for accurate mass balance in depletion
- Particularly for fission products with multiple isomers

---

## 8. PHYSICS CARDS AND SOURCE

### 8.1 Mode and Physics

```
mode    n                      $ Neutron transport only
phys:p  1j 1                   $ Photon physics (not primary mode)
cut:p   j 0.010                $ Photon energy cutoff at 10 keV
```

**Implication**: This is a neutron criticality model, photons included for secondary effects

### 8.2 Criticality Calculation

```
kcode   50000   1.01  10  200
c kcode   500   1.01  10  200   ← Commented debug version
```

**Parameters:**
- 50,000 neutrons per cycle
- Initial guess: k_eff = 1.01
- Skip 10 cycles (inactive)
- Run 200 active cycles
- Total: 210 cycles, 10.5 million active histories

**Settling Calculation:**
```
prdmp   10000000  10000000  1  2  1000000
```
- Dump RUNTPE every 10 million histories (never during run)
- SRCTP every 10 million histories
- Pitch=1, rotate=2 (KCODE options)
- Maximum dump histories = 1 million

**Output Control:**
```
print   -60 -85 -130 -140
```
- Suppress verbose outputs
- -60: Suppress surface crossing print
- -85: Suppress cell importance print
- -130: Suppress geometry print
- -140: Suppress weight window info

### 8.3 Source Distribution

**Spatial Source Points** (30 points in 10 fuel elements):
```
ksrc   3.769   -39.625    10.52     $ elem # 6, lower
       9.099   -34.295    10.52     $ elem # 7, lower
       9.099   -26.757    10.52     $ elem # 8, lower
       ...
       3.769   -39.625    63.50     $ elem # 6, upper
       9.099   -34.295    63.50     $ elem # 7, upper
       ...
```

**Pattern:**
- 3 source points per element (lower, mid, upper)
- 10 fuel elements = 30 source points
- Distributed to ensure rapid convergence

**Source Point Locations:**
- Axially: z = 10.52, 26.00, 41.00, 63.50 cm
- Radially: Within fuel meat regions
- Avoids starting in AGR-1 (lower power, would skew source)

### 8.4 Temperature

```
tmp     2.58510E-08  1731r
```

**Temperature specification:**
- 2.58510E-08 = 300K in MCNP units (300K / 1.16045E+10)
- Applied to 1732 cells (first cell + 1731 repeats)
- Uniform temperature (no thermal feedback modeling)

---

## 9. MAINTAINABILITY FEATURES

### 9.1 Version Control Friendly

**Why This Template Works Well with Git:**

1. **Single source of truth**: bench.template is the canonical model
2. **Plain text**: No binary formats, easy diff
3. **Separation of code and data**: CSV files separate from template
4. **Generated files excluded**: Add `mcnp/*.i` to .gitignore
5. **Reproducibility**: Same template + same CSVs → same outputs

**Recommended Git Structure:**
```
agr-1/
├── bench.template          ← Version controlled
├── create_inputs.py        ← Version controlled
├── power.csv               ← Version controlled
├── oscc.csv                ← Version controlled
├── neck_shim.csv           ← Version controlled
├── plots.py                ← Version controlled
├── .gitignore
│   └── mcnp/               ← Ignored (generated)
└── mcnp/
    ├── bench_138B.i        ← Generated, not tracked
    ├── bench_139A.i
    └── ...
```

### 9.2 Error Prevention

**Systematic Numbering Prevents Conflicts:**
- Cell ranges reserved by component
- Surface ranges by geometry type
- Material ranges by composition type
- No risk of number reuse

**Validation Opportunities:**
```python
# Check for duplicate cell numbers
cell_numbers = extract_cell_numbers(full_input)
assert len(cell_numbers) == len(set(cell_numbers)), "Duplicate cells!"

# Verify surface references
for cell in cells:
    for surf in cell.surfaces:
        assert surf in defined_surfaces, f"Surface {surf} undefined!"
```

### 9.3 Documentation Embedded

**Self-Documenting Code:**
```python
capsule_particle = {
    1: 'variant3',   # Bottom capsule
    2: 'variant2',
    3: 'baseline',   # Reference design
    4: 'variant3',
    5: 'variant1',
    6: 'baseline',   # Top capsule
}
```

**Comments Explain Design:**
```
c     BOC 145A ATR FUEL IN ELEMENTS 6, 7, 8, 9, 10, 11, 12, 13, 14, 15
c     THREE RADIAL REGIONS AND SEVEN AXIAL REGIONS
c     HOMOGENIZED FUEL ZONES FOR PLATES 1 - 4, 5 - 15, & 16 - 19
```

**Physics Rationale Documented:**
```
c     DRUM SET E1 & E2 AT 50.0 DEGREES
c     DRUM SET E3 & E4 AT 50.0 DEGREES
c
c     NE NECK SHIMS 1, 2, 3, 4, 5 & 6 INSERTED
c     SE NECK SHIMS 1, 2, 3, 5 & 6 INSERTED
c     SE REG ROD 50% INSERTED
```

### 9.4 Extensibility

**Easy to Add New Cycles:**
```python
# Just add new cycle to CSV files
cycles = [
    '138B', '139A', '139B', ..., '145A',
    '145B',  # ← New cycle added here
]

# Script automatically processes it
for cycle in cycles:
    template.render(...)
```

**Easy to Add New Capsules:**
```python
# Change range in loop
for cap in range(1, 7):  # Change to range(1, 8) for 7 capsules
    for stack in range(1, 4):
        for comp in range(1, 5):
            cells += compact_cells(cap, stack, comp, particle)
```

**Easy to Change Particle Design:**
```python
# Add new variant
thick['variant4'] = [350.0/2, 105.0, 38.0, 36.0, 40.0]
n_particles['variant4'] = 4200

# Assign to capsules
capsule_particle = {
    1: 'variant4',  # ← New design
    2: 'variant2',
    ...
}
```

---

## 10. KEY TAKEAWAYS FOR TEMPLATE DESIGN

### 10.1 When to Use Templates

**Use templates when:**
- Multiple similar inputs needed (parameter sweep, time series)
- Geometry has fixed + variable components
- Operational data drives model changes
- Inputs must be regenerated frequently
- Multiple collaborators need consistent models

**Don't use templates when:**
- One-off model, unlikely to change
- Complexity of template exceeds benefit
- Team lacks programming skills to maintain script

### 10.2 Design Principles Demonstrated

1. **Separation of Concerns**
   - Geometry structure in template
   - Operational parameters in CSV
   - Generation logic in Python script

2. **Modularity**
   - Functions for repetitive geometry (compacts, particles)
   - Reusable surface/cell generators
   - Independent data files

3. **Validation**
   - Time-weighted averaging prevents extreme states
   - Discrete angle library bounds drum positions
   - Plots verify data before running MCNP

4. **Documentation**
   - Inline comments throughout template
   - Descriptive variable names in script
   - README equivalent in header comments

5. **Scalability**
   - Lattices for repetitive structures
   - Universes for hierarchy
   - Loops generate variations

### 10.3 Lessons Learned

**From This Example:**

1. **Time-averaging is essential**
   - Reactor doesn't operate at constant state
   - Single input must represent entire cycle
   - Power-weighted or time-weighted averages

2. **Discrete parameter spaces work well**
   - 13 drum angles cover full range
   - Binary neck shim states (in/out)
   - Reduces template complexity

3. **Visualization catches errors**
   - Plots of OSCC, power, shims over time
   - Anomalies visible before MCNP run
   - Stakeholder communication aid

4. **Fixed geometry is template core**
   - ATR geometry never changes (in template)
   - Only control positions and test assembly vary
   - Minimizes generation complexity

5. **Universe hierarchy is powerful**
   - 288,000 TRISO particles modeled efficiently
   - Input file stays reasonable size (860 KB)
   - MCNP performance acceptable

---

## 11. PYTHON SCRIPT ARCHITECTURE

### 11.1 Key Functions

```python
def define_irrad_case(filename, time, power):
    """Generate MOAA depletion step specification"""

def find_closest_value(angles, ave_angle):
    """Select discrete angle closest to continuous average"""

def calculate_radii(thick):
    """Convert layer thicknesses to cumulative radii"""

def compact_surfaces(s, thick, n_particles):
    """Generate surface cards for TRISO compact"""

def compact_cells(cap, stack, comp, particle):
    """Generate cell cards for TRISO compact with lattices"""

def compact_center(cap, stack, comp):
    """Calculate 3D position of compact in capsule"""

def get_neck_shim_cells(vals, mat, rod, condition):
    """Generate neck shim cell based on insertion state"""
```

### 11.2 Data Processing Pipeline

```python
# 1. Load operational data
power_df = pd.read_csv('power.csv')
oscc_df = pd.read_csv('oscc.csv')
neck_df = pd.read_csv('neck_shim.csv')

# 2. Organize by cycle
for cycle in cycles:
    time_steps = cycles_by_timestep.count(cycle)
    power_by_cycle[cycle] = power_df[prev:prev+time_steps]
    ...

# 3. Time-average each parameter
ave_angle = (angle * time_interval).sum() / total_time
ave_power = (power * time_interval).sum() / total_time

# 4. Select discrete values
angle = find_closest_value(angles, ave_angle)
condition = int(np.rint(ave_insertion))

# 5. Generate geometry
oscc_surfaces[cycle] = drum_surfaces[group][angle]
ne_cells[cycle] = get_neck_shim_cells(...)

# 6. Render template
template.render(oscc_surfaces=oscc_surfaces[cycle], ...)
```

### 11.3 Jinja2 Template Syntax

**Variable Insertion:**
```jinja2
{{variable_name}}
```

**In Python:**
```python
template.render(variable_name="replacement text")
```

**Multi-line String Insertion:**
```python
ne_cells = """c
  702   71 4.55926e-02    701   -702  100  -200
c
  707   71 4.55926e-02    706   -707  100  -200
"""

template.render(ne_cells=ne_cells)
```

---

## 12. SUMMARY AND RECOMMENDATIONS

### 12.1 What Makes This Template Effective

1. **Clear Separation**: Fixed ATR geometry vs. variable AGR-1 + controls
2. **Time-Averaging**: Multi-step cycles collapsed to single representative state
3. **Discrete Parameters**: Limited angle/position choices prevent unrealistic states
4. **Automated QA**: Plots verify inputs before expensive MCNP runs
5. **Modular Functions**: Reusable code for repetitive geometry
6. **Data-Driven**: CSV files accessible to non-programmers
7. **Well-Documented**: Comments throughout template and script

### 12.2 Potential Improvements

**Could Be Enhanced:**
1. **Schema validation**: Check CSV structure before processing
2. **Unit tests**: Verify geometry generation functions
3. **Configuration file**: Separate paths, cycle lists from code
4. **Logging**: Record generation decisions (which angle selected, etc.)
5. **Diff tool**: Compare generated inputs cycle-to-cycle
6. **Geometry validation**: Run MCNP fatal-only checks automatically

### 12.3 Applicability to Other Problems

**This Approach Works Well For:**
- Multi-cycle burnup calculations
- Parameter sensitivity studies
- Reactor operational history reconstruction
- Experiment design optimization
- Benchmark series (different configurations)

**Key Requirements:**
- Some geometry/physics stays constant
- Variations describable by parameters
- Parameters come from external data
- Multiple related inputs needed

---

## APPENDIX A: FILE SIZES AND STATISTICS

```
bench.template:       646 KB,  13,727 lines
create_inputs.py:      27 KB,     993 lines
power.csv:             82 KB,   1,054 rows × 10 columns
oscc.csv:              53 KB,   1,054 rows × 6 columns
neck_shim.csv:        133 KB,   1,054 rows × 28 columns

Generated files:
  bench_138B.i:       860 KB,  17,310 lines
  bench_139A.i:       860 KB,  17,310 lines
  ... (13 files)
  sdr-agr.i:          212 KB,   5,100 lines

Total generated:      ~12 MB,  13 MCNP inputs
```

**Generation Time:**
- Typical: < 5 seconds on modern laptop
- Includes CSV parsing, averaging, rendering, plot generation

**MCNP Runtime Estimate:**
- 50,000 histories × 200 cycles = 10 million active
- ~280,000 TRISO particles (explicit geometry)
- Estimated: 12-24 hours per cycle on 32-core workstation

---

## APPENDIX B: QUICK REFERENCE

### Template Placeholder Locations
```
Line   621: {{ne_cells}}        NE neck shim cells
Line   674: {{se_cells}}        SE neck shim cells
Line  1430: {{cells}}           AGR-1 test assembly cells
Line  1782: {{oscc_surfaces}}   Control drum position surfaces
Line  2214: {{surfaces}}        AGR-1 surfaces
Line 13603: {{materials}}       AGR-1 kernel materials
```

### Major Section Boundaries
```
Line     1: Header
Line    53: Cell Block Start
Line   621: NE Neck Shims (PARAMETERIZED)
Line   674: SE Neck Shims (PARAMETERIZED)
Line  1430: AGR-1 Cells (PARAMETERIZED)
Line  1778: Surface Block Start
Line  1782: Control Drums (PARAMETERIZED)
Line  2214: AGR-1 Surfaces (PARAMETERIZED)
Line  2218: Data Block Start
Line  2470: ATR Fuel Materials
Line 13603: AGR-1 Materials (PARAMETERIZED)
Line 13610: Physics Cards
Line 13657: Source Definition
```

### Command to Generate Inputs
```bash
cd /path/to/agr-1
python create_inputs.py
```

**Outputs:**
- `mcnp/bench_138B.i` through `mcnp/bench_145A.i`
- `mcnp/sdr-agr.i`
- `oscc_cycle_*.png` (plots)
- `power_cycle_*.png` (plots)
- `neck_cycle_*.png` (plots)

---

**Document prepared for: MCNP Reactor Modeling Training**
**Example: AGR-1 TRISO Fuel Irradiation Test in ATR**
**Template Architecture: Jinja2 + Python + CSV Data**
